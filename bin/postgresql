#!/usr/bin/env bash

function fail {
  echo $1 1>&2
  exit 1
}

typeset -r PG_DATA=/opt/postgresql/home/data

[[ $1 == @(start|stop|restart|reload) ]] || fail "Unrecognized command $1"

[[ $1 == start ]] && typeset -r LOG_ARG="-l $PG_DATA/serverlog"

[[ $1 == @(start|stop|restart) ]] && typeset -r WAIT_ARG="-w"

pg_ctl $1 -D $PG_DATA $WAIT_ARG $LOG_ARG
